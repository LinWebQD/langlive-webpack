webpackJsonp([0],[function(e,t,n){n(1),n(2),n(3),n(4)},function(e,t){!function(e,t){function n(){var t=s.getBoundingClientRect().width;t/r>540&&(t=540*r);var n=t/10;s.style.fontSize=n+"px",m.rem=e.rem=n}var a,o=e.document,s=o.documentElement,l=o.querySelector('meta[name="viewport"]'),i=o.querySelector('meta[name="flexible"]'),r=0,c=0,m=t.flexible||(t.flexible={});if(l){console.warn("将根据已有的meta标签来设置缩放比例");var u=l.getAttribute("content").match(/initial\-scale=([\d\.]+)/);u&&(c=parseFloat(u[1]),r=parseInt(1/c))}else if(i){var d=i.getAttribute("content");if(d){var f=d.match(/initial\-dpr=([\d\.]+)/),p=d.match(/maximum\-dpr=([\d\.]+)/);f&&(r=parseFloat(f[1]),c=parseFloat((1/r).toFixed(2))),p&&(r=parseFloat(p[1]),c=parseFloat((1/r).toFixed(2)))}}if(!r&&!c){var v=(e.navigator.appVersion.match(/android/gi),e.navigator.appVersion.match(/iphone/gi)),h=e.devicePixelRatio;r=v?h>=3&&(!r||r>=3)?3:h>=2&&(!r||r>=2)?2:1:1,c=1/r}if(s.setAttribute("data-dpr",r),!l)if(l=o.createElement("meta"),l.setAttribute("name","viewport"),l.setAttribute("content","initial-scale="+c+", maximum-scale="+c+", minimum-scale="+c+", user-scalable=no"),s.firstElementChild)s.firstElementChild.appendChild(l);else{var g=o.createElement("div");g.appendChild(l),o.write(g.innerHTML)}e.addEventListener("resize",function(){clearTimeout(a),a=setTimeout(n,300)},!1),e.addEventListener("pageshow",function(e){e.persisted&&(clearTimeout(a),a=setTimeout(n,300))},!1),"complete"===o.readyState?o.body.style.fontSize=12*r+"px":o.addEventListener("DOMContentLoaded",function(e){o.body.style.fontSize=12*r+"px"},!1),n(),m.dpr=e.dpr=r,m.refreshRem=n,m.rem2px=function(e){var t=parseFloat(e)*this.rem;return"string"==typeof e&&e.match(/rem$/)&&(t+="px"),t},m.px2rem=function(e){var t=parseFloat(e)/this.rem;return"string"==typeof e&&e.match(/px$/)&&(t+="rem"),t}}(window,window.lib||(window.lib={}))},function(e,t){},function(e,t){},function(e,t){!function(){function e(e){console.log(e),1==v?window.webkit.messageHandlers.langWeb2App_httpreq.postMessage({body:'{"base_url":"'+h+'v2/","requst_url":"friend/follow","param":{"be_pfid":"'+e+'","action":"1"}}'}):javascriptinterface.langWeb2App_httpreq(h+"v2/friend/follow",'{"key": ["be_pfid","action"],"value": ["'+e+'","1"],"needlogin": false,"callback": true,"callback_tag": "follow"}')}function t(e,t){return e.className.match(new RegExp("(\\s|^)"+t+"(\\s|$)"))}function n(e){return document.getElementById(e)}function a(e,t){return document.getElementById(e).innerHTML=t}function o(e,t,n){var a="http://"+window.location.host+"/",o=a+e.urlStr,s=e.ajaxType,l=e.ajaxData,i=null;i=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");var r=null;if(i.open(s,o,!0),"POST"===s&&null!=l){i.setRequestHeader("Content-type","application/x-www-form-urlencoded;charset=utf-8");for(var c in l)r+="&"+c+"="+l[c],r=r.slice(1)}i.onreadystatechange=function(){if(4==i.readyState)if(200==i.status){var e=JSON.parse(i.responseText);t(e)}else n(i.status)},i.send(r)}function s(){o({ajaxType:"GET",urlStr:"mock/degula/dracula_second_data.json",ajaxData:null},function(e){console.log(e),"0"==e.ret_code&&(c(e.data.my),u(e.data.star),l(e.data.forecast))},function(e){console.log(e)})}function l(e){var t=(document.getElementsByClassName("same-camp-ticket"),document.getElementsByClassName("justice-ticket")),n=document.getElementsByClassName("evil-ticket"),a=document.getElementsByClassName("justice-btn"),o=document.getElementsByClassName("evil-btn"),s=document.getElementsByClassName("justice-win"),l=document.getElementsByClassName("evil-win"),c=[],m=e.vote_result;for(var u in m)c.push(m[u]);console.log(c);for(var d=0;d<c.length;d++){var f=c[d],p=f.ticket_count_justice,v=f.ticket_count_evil;t[d].innerHTML=p+"票",n[d].innerHTML=v+"票";var h=f.win;1==h?s[d].className="justice-win show":-1==h&&(l[d].className="evil-win show");var g=f.used_ticket;1==g?(a[d].className="default-btn justice-btn have-voted",document.getElementsByClassName("have-voted")[d].innerHTML="已投"):-1==g&&(o[d].className="default-btn evil-btn have-voted",document.getElementsByClassName("have-voted")[d].innerHTML="已投")}var b=document.getElementsByClassName("icon-round"),w=["icon-one-start","icon-two-start","icon-three-start"],N=e.stage,y=document.getElementsByClassName("same-is-start"),T=document.getElementsByClassName("default-btn");if(1==N){b[0].className="icon-round "+w[0];var E=c[0].forecast_end_time;if(y[1].innerHTML="投票未開始",y[2].innerHTML="投票未開始",0!=E){i("oneCountDown",E,N),T[0].className="default-btn justice-btn prophet-btn",T[1].className="default-btn evil-btn prophet-btn";var M=document.getElementsByClassName("prophet-btn");r(M,N)}else y[0].innerHTML="投票已經結束"}else if(2==N){b[1].className="icon-round "+w[1];var C=c[1].forecast_end_time;if(y[0].innerHTML="投票已經結束",y[2].innerHTML="投票未開始",0!=C){i("twoCountDown",C,N),T[2].className="default-btn justice-btn prophet-btn",T[3].className="default-btn evil-btn prophet-btn";var M=document.getElementsByClassName("prophet-btn");r(M,N)}else y[1].innerHTML="投票已經結束"}else if(3==N){b[2].className="icon-round "+w[2];var L=c[2].forecast_end_time;if(y[0].innerHTML="投票已經結束",y[1].innerHTML="投票已經結束",0!=L){i("threeCountDown",L,N),T[4].className="default-btn justice-btn prophet-btn",T[5].className="default-btn evil-btn prophet-btn";var M=document.getElementsByClassName("prophet-btn");r(M,N)}else y[2].innerHTML="投票已經結束"}}function i(e,t,a){function o(){d--,d<10&&(d="0"+d),d.length>=3&&(d=59,u="0"+(Number(u)-1)),u.length>=3&&(u="00",d="00",f=!1,clearInterval(c)),f?r.innerHTML="投票倒计时："+u+"："+d:(r.innerHTML="投票已經結束",i[0].className="default-btn justice-btn",i[1].className="default-btn evil-btn")}var s=a-1,l=document.getElementsByClassName("prophet-lists")[s],i=l.getElementsByClassName("default-btn"),r=n(e),c=null,m=t,u=0,d=0,f=!0;u=Math.floor(m/60%60),u<10&&(u="0"+u),d=Math.floor(m%60),c=setInterval(o,1e3)}function r(e,n){for(var a=0;a<e.length;a++)e[a].addEventListener("click",function(e){if(e.preventDefault(),e.stopPropagation(),t(this,"prophet-btn")){var a=this.getAttribute("data-vote");console.log(a,n),console.log(this.className)}})}function c(e){var t=e.follow_status,a=e.pfid,o=n("following");1==t?o.className="hide":0==t&&m(a)}function m(t){n("following").onclick=function(){e(t),this.className="hide"}}function u(e){var t=e.ticket_count;a("remainStars",t),d(e.end_time);for(var o=e.vote_result,s="",l=o.length,i=0;i<l;i++){var r=o[i],c=r.count,m=r.nickname,u=r.pfid,p=r.headimg;s+="<li>",s+='<div class="user-img">',s+='<img src="'+p+'" alt="">',s+="</div>",s+="<p>"+m+"</p>",s+="<p>獲得星星："+c+"</p>",s+=0==t?'<span data-anchorpfid="'+u+'">投票</span>':'<span class="vote-btn" data-anchorpfid="'+u+'">投票</span>',s+="</li>"}n("userLists").innerHTML=s,f()}function d(e){function t(){r--,r<10&&(r="0"+r),r.length>=3&&(r=59,i="0"+(Number(i)-1)),i.length>=3&&(i="00",r="00",clearInterval(o),s()),a.innerHTML=i+"："+r}var a=n("ramainTimes"),o=null,l=e,i=0,r=0;i=Math.floor(l/60%60),i<10&&(i="0"+i),r=Math.floor(l%60),o=setInterval(t,1e3)}function f(){for(var e=document.getElementsByClassName("vote-btn"),t=0;t<e.length;t++)e[t].addEventListener("click",function(e){this.getAttribute("data-anchorpfid");alert(pfid)})}var p=navigator.userAgent,v=(navigator.appVersion,!!p.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/)),h="https://"+window.location.host+"/";s(),function(){for(var e=document.getElementsByClassName("js-nav-btn"),t=document.getElementsByClassName("content-item"),a=0;a<e.length;a++)e[a].index=a,e[a].onclick=function(){for(var n=0;n<t.length;n++)t[n].className="content-item",e[n].className="js-nav-btn";e[this.index].className="js-nav-btn selected",t[this.index].className="content-item show"};var o=n("ruleBtn"),s=n("rule"),l=n("container");o.addEventListener("click",function(){l.className="hide",s.className="show",console.log(this)}),s.addEventListener("click",function(){this.className="",l.className=""})}(),function(e){function t(){n.style.display=a.scrollTop+o.scrollTop>100?"block":"none"}var n=document.getElementById(e),a=document.documentElement,o=document.body;window.onscroll=t,n.style.display="none",n.onclick=function(){n.style.display="none",window.onscroll=null,this.timer=setInterval(function(){a.scrollTop-=Math.ceil(.1*(a.scrollTop+o.scrollTop)),o.scrollTop-=Math.ceil(.1*(a.scrollTop+o.scrollTop)),a.scrollTop+o.scrollTop==0&&clearInterval(n.timer,window.onscroll=t)},10)}}("backTop")}()}],[0]);